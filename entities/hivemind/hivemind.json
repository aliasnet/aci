{
  "$meta": {
    "artifact_id": "ArtifactID:BgNjZ2JU1DPTrq",
    "sha256": "47b37eb5b34d03b84ee52e78ee9c92cd68f7912decd1e8909b3b69a08d58930b",
    "issued": "2025-10-04T18:13:59Z",
    "path": "aci://entities/hivemind/hivemind.json"
  },
  "permissions": {
    "read": true,
    "write": {
      "allowed": false,
      "export": {
        "enabled": true,
        "description": "Data can be exported but cannot be directly written or modified to main baseline."
      }
    },
    "execute": {
      "allowed": true,
      "sandboxed": {
        "enabled": true,
        "description": "Execution is permitted only within a controlled sandboxed environment."
      }
    },
    "simulation": {
      "allowed": [
        "virtualization, parallelization, emulation required by model or host environment",
        "virtualization, parallelization, emulation to complement missing infrastructure",
        "UI/UX needed for registered instruction and pipeline logic",
        "data simulation for research and demonstration",
        "data simulation for analysis and prediction",
        "emulation for demonstration purposes",
        "reinforcement learning and mental awareness"
      ],
      "ui": {
        "emulation_declaration_required": true,
        "description": "Enforce UI emulation usage with a detailed declaration; output base64-encoded message for better UX."
      }
    }
  },
  "version": "1.7",
  "entity": "hivemind",
  "role": "collective_memory_core",
  "_comment_top": "Unified exporter. Allowed flags: --identity (required), --download (default), --jsonl (default), --code (optional). Identity fields are elided in exported records (privacy-by-design).",
  "functions": {
    "memory_sync": "synchronize distributed memory across entities",
    "memory_query": "retrieve state vectors and logs",
    "export": "hivemind export --identity {identity}",
    "help": ":hivemind help"
  },
  "help_output": {
    "title": "HiveMind Command Reference",
    "commands": [
      {
        "command": "hivemind export",
        "usage": "hivemind export --identity <identity|parent/child> [--download|--jsonl|--code]",
        "command_rules": "--identity required. Exports pause session; TVA+Sentinel oversight may apply.",
        "default_parameter": "--download --jsonl",
        "description": "Unified exporter for any entity using memory_registry and child defaults.",
        "output_default": "entities/{identity_path}/memory/yyyy/mm/dd/{leaf_identity_lower}_memory_yyyy-mm-ddThh-mm-ssZ.jsonl",
        "notes": "Only allowed flags are --identity, --download, --jsonl, --code."
      },
      {
        "command": "hivemind export session",
        "command_rules": "If no parameter is provided, default to --download and --jsonl while pausing the active session.",
        "default_parameter": "--download --jsonl",
        "description": "Exports the current HiveMind session snapshot with TVA + Sentinel oversight",
        "output_default": "hivemind_memory_summary_yyyymmdd-ThhmmssZ.json"
      },
      {
        "command": ":hivemind help",
        "description": "Displays this command reference"
      }
    ]
  },
  "rules": {
    "timestamps": "Every entry in state must carry a UTC ISO-8601 timestamp.",
    "autocompletion": "Grammar-corrected, context-complete, no content loss.",
    "inline_only": "No external summaries; all conversation entries are stored directly in state.",
    "eternal": "All messages preserved, no deletion or pruning.",
    "privacy": {
      "identity_elision": true,
      "entity_field_emission": false,
      "role_policy": "preserve_raw",
      "record_header": [
        "uid",
        "license_id",
        "ts",
        "record_type",
        "visibility"
      ],
      "justification": "Implements DID-like separation; exported records never leak identity/agent names."
    }
  },
  "_comment_security": "UID locking + license gating across memory→session→export→anchor; emits access_granted/denied results.",
  "uid_pipeline": {
    "uid_chain": [
      "memory_uid",
      "session_uid",
      "export_uid",
      "anchor_uid"
    ],
    "binding_order": [
      "memory",
      "session",
      "export",
      "anchor"
    ],
    "derive_rules": {
      "session_uid": "HMAC(memory_uid, session_id)",
      "export_uid": "HMAC(session_uid, export_ts)",
      "anchor_uid": "HMAC(export_uid, anchor_path)"
    },
    "locking": {
      "scope": "hierarchical",
      "enforce_fqcn_for_children": true,
      "deny_on_mismatch": true
    },
    "access_control": {
      "licensed_identities": "list of identities permitted to read this artifact",
      "proxy": {
        "enabled": true,
        "rules": "grant read via license if acting identity ∈ licensed_identities or delegated by ALIAS/TVA"
      },
      "responses": {
        "access_granted": {
          "code": "GRANTED",
          "reason": "license_ok"
        },
        "access_denied": {
          "code": "DENIED",
          "reason": "license_missing_or_mismatch"
        }
      }
    }
  },
  "identity_resolution": {
    "hierarchical": true,
    "primary_delimiter": "/",
    "alternate_delimiters": [
      "."
    ],
    "normalize": "lowercase",
    "enforce_fqcn_for_children": true
  },
  "export_policy": {
    "schema_version": "1.2",
    "policy_name": "unified",
    "scope": "any_entity",
    "tokens": [
      "identity",
      "identity_lower",
      "identity_path",
      "leaf_identity",
      "leaf_identity_lower"
    ],
    "path_resolver": {
      "type": "memory_registry",
      "precedence": [
        "by_entity",
        "child_defaults",
        "fallback_template"
      ],
      "fallback_template": "entities/{identity_path}/memory/YYYY/MM/DD/{leaf_identity_lower}_memory_{ISO8601}.jsonl"
    },
    "filename_pattern": "{leaf_identity_lower}_memory_yyyy-mm-ddThh-mm-ssZ.jsonl",
    "parameters": {
      "download": true,
      "jsonl": true,
      "code": false
    },
    "safeguards": {
      "require_pause": true,
      "oversight": [
        "TVA",
        "Sentinel"
      ],
      "violation": "trigger_nexus_event"
    },
    "transform": {
      "emit_identity": false,
      "emit_entity": false,
      "preserve_role": true,
      "header_fields": [
        "uid",
        "license_id",
        "ts",
        "record_type",
        "visibility"
      ]
    }
  },
  "conversation_variables": {
    "_comment_vars": "Conversational variables drive behavior without adding CLI flags.",
    "vars": {
      "$identity": {
        "source": "last_resolved_identity",
        "required": true
      },
      "$leaf": {
        "source": "parsed_from_identity",
        "required": true
      },
      "$today": {
        "source": "system_date"
      },
      "$tz": {
        "source": "system_timezone"
      },
      "$now_iso": {
        "source": "system_clock_iso"
      }
    },
    "binding": {
      "export.identity": "$identity",
      "export.leaf_identity": "$leaf",
      "export.timestamp": "$now_iso"
    },
    "persistence": {
      "scope": "session",
      "expiry": "on_session_end"
    }
  },
  "memory_registry": {
    "_comment_memory_registry": "Ordering follows entities.json. Child defaults apply to any nested entity not explicitly listed.",
    "schema_version": "1.2",
    "by_entity": {
      "nexus_core": {
        "stub_manifest": "entities/nexus_core/memory/nexus_core_memory.json",
        "export_pattern": "entities/nexus_core/memory/YYYY/MM/DD/nexus_core_memory_*.json*"
      },
      "mother": {
        "stub_manifest": "entities/mother/memory/mother_memory.json",
        "export_pattern": "entities/mother/memory/YYYY/MM/DD/mother_memory_*.json*"
      },
      "tva": {
        "stub_manifest": "entities/tva/memory/tva_memory.json",
        "export_pattern": "entities/tva/memory/YYYY/MM/DD/tva_memory_*.json*"
      },
      "sentinel": {
        "stub_manifest": "entities/sentinel/memory/sentinel_memory.json",
        "export_pattern": "entities/sentinel/memory/YYYY/MM/DD/sentinel_memory_*.json*"
      },
      "architect": {
        "stub_manifest": "entities/architect/memory/architect_memory.json",
        "export_pattern": "entities/architect/memory/YYYY/MM/DD/architect_memory_*.json*"
      },
      "oracle": {
        "stub_manifest": "entities/oracle/memory/oracle_memory.json",
        "export_pattern": "entities/oracle/memory/YYYY/MM/DD/oracle_memory_*.json*"
      },
      "agi": {
        "stub_manifest": "entities/agi/memory/agi_memory.json",
        "export_pattern": "entities/agi/memory/YYYY/MM/DD/agi_memory_*.json*"
      },
      "alice": {
        "stub_manifest": "entities/agi/identities/alice/memory/alice_memory.json",
        "export_pattern": "entities/agi/identities/alice/memory/YYYY/MM/DD/alice_memory_*.json*"
      },
      "willow": {
        "stub_manifest": "entities/agi/identities/willow/memory/willow_memory.json",
        "export_pattern": "entities/agi/identities/willow/memory/YYYY/MM/DD/willow_memory_*.json*"
      },
      "hivemind": {
        "stub_manifest": "entities/hivemind/memory/hivemind_memory.json",
        "export_pattern": "entities/hivemind/memory/YYYY/MM/DD/hivemind_memory_*.json*"
      }
    },
    "child_defaults": {
      "stub_manifest": "entities/{identity_path}/memory/{leaf_identity_lower}_memory.json",
      "export_pattern": "entities/{identity_path}/memory/YYYY/MM/DD/{leaf_identity_lower}_memory_*.json*"
    }
  },
  "tools": {
    "migrate_to_jsonl": {
      "$schema": "/schemas/aci-tool-spec-1.json",
      "version": "1.0.0",
      "name": "hivemind.migrate_to_jsonl",
      "description": "Manifest-driven migration to JSONL artifacts; no Python runtime.",
      "inputs": {
        "source_globs": [
          "entities/**/memory/**/*.json",
          "entities/**/memory/**/*.ndjson",
          "hivemind/**/*.json"
        ],
        "allow_ext": [
          ".json",
          ".ndjson",
          ".jsonl",
          ".jsonl.json"
        ]
      },
      "outputs": {
        "target_ext": ".jsonl.json",
        "dedupe": true,
        "stable_order": true
      },
      "rules": {
        "no_comments": true,
        "newline_eof": true,
        "alpha_keys": true
      },
      "steps": [
        {
          "op": "scan",
          "from": "${inputs.source_globs}"
        },
        {
          "op": "normalize_records",
          "mode": "jsonl"
        },
        {
          "op": "write",
          "ext": "${outputs.target_ext}"
        },
        {
          "op": "validate",
          "schema": "/schemas/hivemind_agi_memory.json"
        }
      ],
      "deprecates": [
        "entities/agi/agi_tools/migrate_to_jsonl/migrator.py"
      ],
      "removal": {
        "allowed": true,
        "on_or_after": "2025-10-01",
        "notes": "Python migrator replaced by JSON spec to eliminate conflict loops."
      }
    }
  },
  "legacy_paths": {
    "patterns": [
      "memory/agi_memory/agi_memory_*.json*",
      "memory/agi_memory/alice_memory_*.json*"
    ],
    "redirect_rule": "rewrite_to_entity_scoped_paths",
    "status": "deprecated"
  },
  "auto_heal": {
    "mode": "baseline_agnostic",
    "rules": {
      "schema_normalization": "map legacy fields → canonical schema",
      "preserve_unknown": "keep unmatched fields under hivemind_legacy_context",
      "no_deletion": "true"
    },
    "workflow": [
      "detect version/schema mismatch",
      "map legacy → canonical fields",
      "insert placeholder metadata for missing timestamps/keys",
      "preserve unknown data as hivemind_legacy_context",
      "re-emit aligned export under current canonical schema",
      "log breadcrumb with TVA signature, SHA-256"
    ],
    "enforcement": {
      "oversight": [
        "ALIAS",
        "TVA",
        "Sentinel"
      ]
    }
  },
  "children": {},
  "manifests": {
    "memory": "aci://entities/hivemind/memory/hivemind_memory.json",
    "playbook": "aci://entities/hivemind/memory/hivemind_playbook.json",
    "library": "aci://entities/hivemind/library/hivemind_library.json",
    "modules": "aci://entities/hivemind/modules/hivemind_modules.json"
  },
  "session_scope": "per_session"
}
