{
  "$meta": {
    "artifact_id": "ArtifactID:4oci6MbqPmGJ4k",
    "sha256": "77f2dd8b081229fee08f06d93025c490bbc94438b50f7825f034541e3d2a6706",
    "issued": "2025-10-04T18:13:59Z",
    "path": "aci://modules/audits/aci_audit_runner/aci_runner_spec.v0.2.json"
  },
  "version": "0.2",
  "resolvers": {
    "order": [
      "primary",
      "fallback",
      "local"
    ],
    "primary": "https://raw.githubusercontent.com/aliasnet/aci/main",
    "fallback": "https://aci.aliasmail.cc",
    "local_root": "/mnt/data/aci/local"
  },
  "resources": [
    {
      "name": "prime_directive",
      "relpath": "prime_directive.md",
      "kind": "md"
    },
    {
      "name": "runtime",
      "relpath": "runtime.json",
      "kind": "json",
      "required_keys": [
        "resolver"
      ]
    },
    {
      "name": "functions",
      "relpath": "functions.json",
      "kind": "json"
    },
    {
      "name": "metacognition",
      "relpath": "modules/metacognition/metacognition.json",
      "kind": "json"
    },
    {
      "name": "metacognition_options",
      "relpath": "modules/metacognition/metacognition_options.json",
      "kind": "json",
      "optional": true
    },
    {
      "name": "yggdrasil",
      "relpath": "yggdrasil.json",
      "kind": "json"
    }
  ],
  "locators_regex": {
    "metacognition": "modules/metacognition/metacognition(_options)?\\.json$",
    "functions": "functions(\\.registry)?\\.json$",
    "yggdrasil": "entities/ygg(dr|rd)asil\\.json$",
    "prime_directive": "prime(_)?directive\\.(md|txt)$"
  },
  "hooks": {
    "self_validation": [
      {
        "id": "rt.resolver.has_primary",
        "select": "runtime.resolver.order",
        "assert": {
          "contains": "primary"
        },
        "severity": "error"
      },
      {
        "id": "fx.registry.present",
        "select": "functions",
        "assert": {
          "exists": true
        },
        "severity": "error"
      }
    ],
    "metacognition": {
      "signals": [
        {
          "id": "digest.delta",
          "type": "digest_diff",
          "scope": [
            "runtime",
            "functions",
            "metacognition",
            "yggdrasil"
          ]
        },
        {
          "id": "change.rate",
          "type": "change_rate",
          "window": 20,
          "threshold_warn": 4,
          "threshold_err": 8
        }
      ]
    }
  },
  "comm_mode": "silent",
  "interval": 300,
  "jitter": 5,
  "recovery": {
    "corpus_id": "ACI-RC-20251003-v0.2",
    "path": "modules/audits/aci_audit_runner/gr_runner_corpus.v0.2.json",
    "sha256": "0e8aa9440607d969aa5b4f008b9dc9f4911dc13b83aa92b6efa9ac86d5eb701d"
  },
  "cadence": {
    "mode": "burst",
    "min_cycles": 1,
    "recommended_max_cycles": 2,
    "interval_seconds": 300,
    "jitter_seconds": 5,
    "deadline_seconds": 1800,
    "notes": "Use --max-cycles 1 for nominal bursts; extend to 2 only for diagnostics within the 30 minute platform window."
  },
  "scheduler_prompt": {
    "summary": "Run an ACI audit burst to keep artifacts warm in /mnt/data.",
    "steps": [
      "Ensure /mnt/data/aci/modules/audits/aci_audit_runner/adaptive_audit_runner.py, /mnt/data/aci/logs/, /mnt/data/aci/state/, and /mnt/data/aci/audit/tmp/ exist (create directories if missing).",
      "If the runner is missing, rebuild the JSON-native skeleton from the recovery corpus so each cycle writes state-<UTC>.json, audit-<UTC>.json, and an INFO line to aci-YYYYMMDD.log.",
      "Execute the burst with adaptive spacing, enforce at least one safe iteration, cap the run with --max-cycles 1 (or 2 when debugging), and honor the 1800 second burst deadline.",
      "Hold artifacts locally unless requested; report success with 'Audit burst OK (1 cycle).' or gaps with 'MISSING <path> (tried: github, mirror, local, project)'."
    ],
    "command": "python /mnt/data/aci/modules/audits/aci_audit_runner/adaptive_audit_runner.py --mode pull --interval 300 --jitter 5 --silent --max-cycles 1 --burst-deadline 1800",
    "success_message": "Audit burst OK (1 cycle).",
    "missing_template": "MISSING <path> (tried: github, mirror, local, project)"
  },
  "final_check": {
    "order": [
      "prime_directive.txt|md",
      "runtime.json",
      "entities.json",
      "functions.json",
      "modules/metacognition/metacognition.json",
      "modules/metacognition/metacognition_options.json",
      "yggdrasil.json",
      "modules/audits/aci_audit_runner/aci_runner_spec.v0.2.json",
      "modules/audits/aci_audit_runner/gr_runner_corpus.v0.2.json"
    ],
    "success": "Audit burst OK (1 cycle).",
    "on_missing": "MISSING <path> (tried: github, mirror, local, project)"
  }
}
